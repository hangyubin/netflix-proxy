<!DOCTYPE html>
<html>
<head>
    <title>Netflixä»£ç†æµ‹è¯•</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .result { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { padding: 10px 20px; margin: 5px; }
    </style>
</head>
<body>
    <h1>ğŸ¬ Netflixä»£ç†æœåŠ¡å™¨æµ‹è¯•</h1>
    <p>éƒ¨ç½²åœ¨Netlify Functionsä¸Šçš„ä»£ç†æœåŠ¡</p>
    
    <div>
        <button onclick="testHealth()">æµ‹è¯•å¥åº·æ£€æŸ¥</button>
        <button onclick="testMovieList()">æµ‹è¯•ç”µå½±åˆ—è¡¨</button>
        <button onclick="testMovieDetail()">æµ‹è¯•ç”µå½±è¯¦æƒ…</button>
    </div>
    
    <div id="result"></div>

    <script>
        const BASE_URL = window.location.origin;
        
        async function testHealth() {
            showResult('æµ‹è¯•å¥åº·æ£€æŸ¥...');
            try {
                const response = await fetch(`${BASE_URL}/api?ac=health`);
                const data = await response.json();
                showResult('âœ… å¥åº·æ£€æŸ¥æˆåŠŸ:', data);
            } catch (error) {
                showResult('âŒ å¥åº·æ£€æŸ¥å¤±è´¥:', error);
            }
        }
        
        async function testMovieList() {
            showResult('è·å–ç”µå½±åˆ—è¡¨...');
            try {
                const response = await fetch(`${BASE_URL}/api?ac=list&t=71&pg=1`);
                const data = await response.json();
                showResult('âœ… ç”µå½±åˆ—è¡¨æˆåŠŸ:', data);
            } catch (error) {
                showResult('âŒ ç”µå½±åˆ—è¡¨å¤±è´¥:', error);
            }
        }
        
        async function testMovieDetail() {
            showResult('è·å–ç”µå½±è¯¦æƒ…...');
            try {
                const response = await fetch(`${BASE_URL}/api?ac=detail&ids=128042`);
                const data = await response.json();
                showResult('âœ… ç”µå½±è¯¦æƒ…æˆåŠŸ:', data);
            } catch (error) {
                showResult('âŒ ç”µå½±è¯¦æƒ…å¤±è´¥:', error);
            }
        }
        
        function showResult(message, data = null) {
            const resultDiv = document.getElementById('result');
            let html = `<div class="result"><strong>${message}</strong>`;
            if (data) {
                html += `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            }
            html += '</div>';
            resultDiv.innerHTML = html;
        }
        
        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåŸºæœ¬ä¿¡æ¯
        showResult(`ä»£ç†æœåŠ¡å™¨åŸºç¡€URL: ${BASE_URL}`);
    </script>
</body>
</html>
